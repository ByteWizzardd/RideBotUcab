<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RideBot - Simulaci√≥n de Navegaci√≥n</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>ü§ñ RideBot - Sistema de Navegaci√≥n Multi-Robot</h1>
            <p class="subtitle">Visualizaci√≥n en Tiempo Real</p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Canvas Section -->
            <div class="canvas-container">
                <canvas id="gridCanvas"></canvas>
                <div class="canvas-info">
                    <span id="gridSize">Grid: --x--</span>
                    <span id="fps">FPS: --</span>
                </div>
            </div>

            <!-- Control Panel -->
            <div class="control-panel">
                <h2>Panel de Control</h2>

                <!-- Status -->
                <div class="status-section">
                    <h3>Estado</h3>
                    <div class="status-item">
                        <span>Estado:</span>
                        <span id="statusText" class="status-running">En ejecuci√≥n</span>
                    </div>
                    <div class="status-item">
                        <span>Robots activos:</span>
                        <span id="robotCount">0</span>
                    </div>
                </div>

                <!-- Grid Configuration -->
                <div class="config-section">
                    <h3>‚öôÔ∏è Configuraci√≥n del Grid</h3>
                    <div class="config-info">
                        <p><strong>Tama√±o actual:</strong> <span id="currentGridSize"
                                style="color: #10b981; font-size: 1.2em;">60x60</span></p>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #e2e8f0;">
                        <p style="margin-top: 10px;"><strong>üìù Para cambiar el tama√±o:</strong></p>
                        <ol style="font-size: 0.85em; margin-left: 20px; line-height: 1.6;">
                            <li>Edita <code>include/domain/Global.h</code></li>
                            <li>Cambia <code>GRID_WIDTH</code> y <code>GRID_HEIGHT</code></li>
                            <li>Ejecuta <code>./build.sh rebuild</code></li>
                            <li>Reinicia el servidor</li>
                        </ol>
                    </div>
                </div>

                <!-- Goal Control -->
                <div class="goal-section">
                    <h3>Objetivo</h3>
                    <div class="goal-inputs">
                        <div class="input-group">
                            <label for="goalX">X:</label>
                            <input type="number" id="goalX" value="50" min="1">
                        </div>
                        <div class="input-group">
                            <label for="goalY">Y:</label>
                            <input type="number" id="goalY" value="30" min="1">
                        </div>
                        <button id="setGoalBtn" class="btn btn-secondary">Establecer Objetivo</button>
                    </div>
                    <p class="hint">üí° Tambi√©n puedes hacer click en el canvas para establecer el objetivo</p>
                </div>

                <!-- Obstacle Editor -->
                <div class="editor-section">
                    <h3>Editor de Obst√°culos</h3>
                    <button id="editModeBtn" class="btn btn-edit">üñäÔ∏è Activar Modo Edici√≥n</button>
                    <div id="editorControls" class="editor-controls" style="display: none;">
                        <p class="hint">‚úèÔ∏è Haz click en el grid para agregar/eliminar obst√°culos</p>
                        <button id="clearObstaclesBtn" class="btn btn-warning">üóëÔ∏è Limpiar Obst√°culos</button>
                        <button id="randomObstaclesBtn" class="btn btn-info">üé≤ Generar Aleatorios (25%)</button>
                    </div>
                </div>

                <!-- Statistics Dashboard -->
                <div class="stats-section">
                    <h3>üìä Estad√≠sticas del Sistema</h3>

                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="statCompletedTasks">0</div>
                            <div class="stat-label">Tareas Completadas</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statCellsTraveled">0</div>
                            <div class="stat-label">Cuadros Recorridos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statDistance">0 km</div>
                            <div class="stat-label">Distancia Total</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statEfficiency">0%</div>
                            <div class="stat-label">Eficiencia</div>
                        </div>
                    </div>

                    <!-- Chart -->
                    <div class="chart-container">
                        <canvas id="statsChart"></canvas>
                    </div>

                    <!-- Additional Stats -->
                    <div class="additional-stats">
                        <span>ü§ñ Robots: <strong id="statRobots">0/0</strong></span>
                        <span>‚è±Ô∏è Uptime: <strong id="statUptime">0s</strong></span>
                    </div>
                </div>

                <!-- Legend -->
                <div class="legend-section">
                    <h3>Leyenda</h3>
                    <div class="legend-item">
                        <div class="legend-color robot"></div>
                        <span>Robot</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color goal"></div>
                        <span>Objetivo</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color obstacle"></div>
                        <span>Obst√°culo</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color empty"></div>
                        <span>Vac√≠o</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>RideBot v2.0 - Sistema Operativo Multi-Robot | <span id="lastUpdate">√öltima actualizaci√≥n:
                    --:--:--</span></p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>

</html>